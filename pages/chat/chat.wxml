<view class="chat-page">
  <view class="fixed-header">
    <view class="header">
      <view class="header-texts">
        <text class="greeting">{{greeting}}</text>
        <text class="subtext">{{welcomStr}}</text>
      </view>
      <view class="header-illustration">
        <image class="avatar-image" src="/images/gift.png" mode="aspectFill"></image>
      </view>
    </view>
  </view>

  <scroll-view class="chat-scroll" scroll-y="true" scroll-with-animation="true" scroll-into-view="{{scrollInto}}">
    <view class="messages">
      <view id="msg-{{index}}" wx:for="{{messages}}" wx:key="index" class="bubble {{item.role === 'user' ? 'right' : 'left'}}">
        <block wx:if="{{item.typing}}">
          <view class="typing">
            <view class="dot"></view>
            <view class="dot"></view>
            <view class="dot"></view>
          </view>
        </block>
        <block wx:else>
          <text>{{item.content}}</text>
        </block>
      </view>
      <view id="end-anchor" class="end-anchor"></view>
    </view>
  </scroll-view>

  <view class="fixed-footer">
    <view class="footer-bg"></view>
    <view class="secondary-actions">
      <view class="pill blue" bindtap="onMyGifts">
        <text class="pill-icon">ğŸ</text>
        <text class="pill-text">æˆ‘çš„ç¤¼èµ </text>
      </view>
      <view class="pill orange" bindtap="onGiftHistory">
        <text class="pill-icon">ğŸ•’</text>
        <text class="pill-text">ç¤¼èµ å†å²</text>
      </view>
    </view>

    <view class="input-area">
      <input class="input" placeholder="è¯·è¾“å…¥æ¶ˆæ¯â€¦" value="{{inputValue}}" bindinput="onInput" confirm-type="send" bindconfirm="onSend" />
      <view class="send-btn" bindtap="onSend">
        <text class="send-icon">â¤</text>
      </view>
    </view>
  </view>
</view>
